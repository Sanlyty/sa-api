CREATE TABLE datacenters (
    id_datacenter SMALLSERIAL PRIMARY KEY,
    name varchar(50),
    created_at TIMESTAMP DEFAULT NOW()
);

INSERT INTO datacenters (id_datacenter, name) VALUES
(1, 'CZ_Chodov'),
(2, 'CZ_Sitel'),
(3, 'MY_Cyberjaja'),
(4, 'MY_AIMS'),
(5, 'US_Ashburn'),
(6, 'US_Mechanigsburg');

CREATE TABLE systems (
    id_system SERIAL PRIMARY KEY,
    name varchar(100),
    id_datacenter SMALLINT REFERENCES datacenters(id_datacenter),
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE cat_metric_type (
    id_cat_metric_type SMALLSERIAL PRIMARY KEY ,
    name VARCHAR(30),
    unit VARCHAR(10)
);

INSERT INTO cat_metric_type
VALUES
    (1, 'PHYSICAL_CAPACITY', 'TB'),
    (2, 'PHYSICAL_SUBS', '%'),
    (3, 'AVAILABLE_CAPACITY', 'TB'),
    (4, 'LOGICAL_USED', '%'),
    (5, 'PHYSICAL_USED', '%'),
    (6, 'COMPRESSION_RATIO', ''),
    (7, 'WORKLOAD', 'IOPS'),
    (8, 'RESPONSE', 'ms'),
    (9, 'TRANSFER', 'Mbps'),
    (10, 'HDD', 'TB'),
    (11, 'CPU', '%'),
    (12, 'WRITE_PENDING', '%'),
    (13, 'SLA_EVENTS', ''),
    (14, 'OUT_OF_SLA_TIME', 's'),
    (15, 'DISBALANCE_EVENTS', ''),
    (16, 'PREDICTION_L1', 'days'),
    (17, 'PREDICTION_L2', 'days'),
    (18, 'PREDICTION_L3', 'days'),
    (19, 'INFO', '');

CREATE TABLE system_metrics (
    id_system_metric SERIAL PRIMARY KEY,
    id_cat_metric_type SMALLINT REFERENCES cat_metric_type(id_cat_metric_type),
    value FLOAT,
    peak FLOAT,
    id_system INTEGER REFERENCES systems(id_system),
    date DATE,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE pools (
    id_pool SERIAL PRIMARY KEY,
    name text,
    id_system INTEGER REFERENCES systems(id_system),
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE pool_metrics (
    id_pool_metric SERIAL PRIMARY KEY,
    id_cat_metric_type SMALLINT REFERENCES cat_metric_type(id_cat_metric_type),
    id_pool INTEGER REFERENCES pools(id_pool),
    id_system INTEGER REFERENCES systems(id_system),
    value FLOAT,
    date DATE,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE chas (
    id_cha SERIAL PRIMARY KEY,
    name TEXT,
    id_system INTEGER REFERENCES systems(id_system),
    created_at TIMESTAMP DEFAULT NOW()
);


CREATE TABLE cha_metrics (
      id_cha_metric SERIAL PRIMARY KEY,
      id_cat_metric_type SMALLINT REFERENCES cat_metric_type(id_cat_metric_type),
      id_cha INTEGER REFERENCES chas(id_cha),
      id_system INTEGER REFERENCES systems(id_system),
      value FLOAT,
      date DATE,
      created_at TIMESTAMP DEFAULT NOW()
);

INSERT INTO systems (id_system, name, id_datacenter) VALUES
(1, 'XP7_G11_58417', 1),
(2, 'XP7_G12_58416', 1),
(3, 'XP7_G13_58734', 1),
(4, 'XP7_G14_10560', 1),
(5, 'XP7_G15_20028', 1),
(6, 'XP7_G16_20359', 1),
(7, 'XP7_B11_50225', 1),
(8, 'XP7_B12_58678', 1),
(9, 'XP7_B13_59006', 1),
(10, 'XP7_B14_10554', 1),
(11, 'XP7_B15_10640', 1),
(12, 'XP7_B16_11114', 1),
(13, 'XP7_STL1_58634', 2),
(14, 'XP7_STL2_10558', 2),
(15, 'XP7_CBJ2_57216', 3),
(16, 'XP7_CBJ3_57222', 3),
(17, 'XP7_CBJ4_20575', 3),
(18, 'XP7_CBJ5_56053', 3),
(19, 'XP7_AIMS1_20627', 4),
(20, 'XP7_QAS1_20610', 5),
(21, 'XP7_QAS2_56139', 5),
(22, 'XP7_MEG1_10239', 6),
(23, 'XP7_MEG2_20725', 6);

INSERT INTO pools (name, id_system) VALUES
('Pool#1 15k-T1', 1),
('Pool#2 SmT-T1', 1),
('Pool#3 FMD-T0', 1),
('Pool#4 OPM-T1', 1),
('Pool#1 15k-T1', 2),
('Pool#2 SmT-T1', 2),
('Pool#3 FMD-T0', 2),
('Pool#4 10k-T2', 2),
('Pool#6 AFA-T1', 2),
('Pool#1 AFA-T0', 3),
('Pool#2 ST-T1', 3),
('Pool#5 ST-T1', 3),
('Pool#6 AFA-T1', 3),
('Pool#0 AFA-T2', 4),
('Pool#1 AFA-T2', 4),
('Pool#0 AFA-T2', 5),
('Pool#1 AFA-T2', 5),
('Pool#1 AFA-T1', 6),
('Pool#2 AFA-T1', 6),
('Pool#1 15k-T1', 7),
('Pool#2 SmT-T1', 7),
('Pool#3 FMD-T0', 7),
('Pool#6 AFA-T1', 7),
('Pool#7 AFA-T1', 7),
('Pool#1 15k-T1', 8),
('Pool#3 AFA-T0', 8),
('Pool#4 SHP-T0', 8),
('Pool#1 AFA-T1', 9),
('Pool#2 AFA-T2', 9),
('Pool#3 AFA-T0', 9),
('Pool#1 AFA-T1', 10),
('Pool#2 AFA-T1', 10),
('Pool#3 AFA-T0', 10),
('Pool#1 AFA-T1', 11),
('Pool#2 AFA-T1', 11),
('Pool#2 AFA-T1', 11),
('Pool#1 AFA-T2', 12),
('Pool#1 15k-T1', 13),
('Pool#2 10k-T2', 13),
('Pool#3 SmT-T1', 13),
('Pool#4 SHP-T0', 13),
('Pool#5 SHT-T0', 13),
('Pool#6 AFA-T0', 13),
('Pool#7 AFA-T1', 13),
('Pool#1 AFA-T1', 14),
('Pool#2 AFA-T1', 14),
('Pool#3 AFA-T0', 14),
('Pool#4 AFA-T2', 14),
('Pool#1 AFA-T1', 15),
('Pool#2 AFA-T1', 15),
('Pool#1 AFA-T1', 16),
('Pool#2 AFA-T1', 16),
('Pool#1 AFA-T1', 17),
('Pool#3 AFA-T0', 17),
('Pool#6 AFA-T1', 18),
('Pool#7 AFA-T1', 18),
('Pool#1 AFA-T1', 19),
('Pool#2 AFA-T2', 19),
('Pool#1 AFA-T1', 20),
('Pool#2 AFA-T1', 20),
('Pool#3 AFA-T0', 20),
('Pool#6 AFA-T2', 21),
('Pool#7 AFA-T2', 21),
('Pool#1 15k-T1', 22),
('Pool#2 10k-T2', 22),
('Pool#1 AFA-T2', 23);



INSERT INTO chas (name, id_system) VALUES
('CHA-1PC,CHA-2PC', 1),
('CHA-1PD,CHA-2PD', 1),
('CHA-1PE,CHA-2PE', 1),
('CHA-1PJ,CHA-2PJ', 1),
('CHA-1PK,CHA-2PK', 1),
('CHA-1PL,CHA-2PL', 1),
('CHA-1PC,CHA-2PC', 2),
('CHA-1PD,CHA-2PD', 2),
('CHA-1PE,CHA-2PE', 2),
('CHA-1PJ,CHA-2PJ', 2),
('CHA-1PK,CHA-2PK', 2),
('CHA-1PL,CHA-2PL', 2),
('CHA-1PC,CHA-2PC', 3),
('CHA-1PD,CHA-2PD', 3),
('CHA-1PE,CHA-2PE', 3),
('CHA-1PJ,CHA-2PJ', 3),
('CHA-1PK,CHA-2PK', 3),
('CHA-1PL,CHA-2PL', 3),
('CHA-1PC,CHA-2PC', 4),
('CHA-1PD,CHA-2PD', 4),
('CHA-1PJ,CHA-2PJ', 4),
('CHA-1PC,CHA-2PC', 5),
('CHA-1PD,CHA-2PD', 5),
('CHA-1PJ,CHA-2PJ', 5),
('CHA-1PC,CHA-2PC', 6),
('CHA-1PD,CHA-2PD', 6),
('CHA-1PE,CHA-2PE', 6),
('CHA-1PJ,CHA-2PJ', 6),
('CHA-1PK,CHA-2PK', 6),
('CHA-1PC,CHA-2PC', 7),
('CHA-1PD,CHA-2PD', 7),
('CHA-1PE,CHA-2PE', 7),
('CHA-1PJ,CHA-2PJ', 7),
('CHA-1PK,CHA-2PK', 7),
('CHA-1PL,CHA-2PL', 7),
('CHA-1PC,CHA-2PC', 8),
('CHA-1PD,CHA-2PD', 8),
('CHA-1PE,CHA-2PE', 8),
('CHA-1PJ,CHA-2PJ', 8),
('CHA-1PK,CHA-2PK', 8),
('CHA-1PC,CHA-2PC', 9),
('CHA-1PD,CHA-2PD', 9),
('CHA-1PJ,CHA-2PJ', 9),
('CHA-1PC,CHA-2PC', 10),
('CHA-1PD,CHA-2PD', 10),
('CHA-1PE,CHA-2PE', 10),
('CHA-1PJ,CHA-2PJ', 10),
('CHA-1PK,CHA-2PK', 10),
('CHA-1PC,CHA-2PC', 11),
('CHA-1PD,CHA-2PD', 11),
('CHA-1PJ,CHA-2PJ', 11),
('CHA-1PK,CHA-2PK', 11),
('CHA-1PC,CHA-2PC', 12),
('CHA-1PD,CHA-2PD', 12),
('CHA-1PJ,CHA-2PJ', 12),
('CHA-1PC,CHA-2PC', 13),
('CHA-1PD,CHA-2PD', 13),
('CHA-1PE,CHA-2PE', 13),
('CHA-1PJ,CHA-2PJ', 13),
('CHA-1PK,CHA-2PK', 13),
('CHA-1PL,CHA-2PL', 13),
('CHA-1PC,CHA-2PC', 14),
('CHA-1PD,CHA-2PD', 14),
('CHA-1PJ,CHA-2PJ', 14),
('CHA-1PK,CHA-2PK', 14),
('CHA-1PC,CHA-2PC', 15),
('CHA-1PD,CHA-2PD', 15),
('CHA-1PJ,CHA-2PJ', 15),
('CHA-1PK,CHA-2PK', 15),
('CHA-1PC,CHA-2PC', 16),
('CHA-1PD,CHA-2PD', 16),
('CHA-1PE,CHA-2PE', 16),
('CHA-1PJ,CHA-2PJ', 16),
('CHA-1PK,CHA-2PK', 16),
('CHA-1PC,CHA-2PC', 17),
('CHA-1PD,CHA-2PD', 17),
('CHA-1PJ,CHA-2PJ', 17),
('CHA-1PK,CHA-2PK', 17),
('CHA-1PC,CHA-2PC', 18),
('CHA-1PD,CHA-2PD', 18),
('CHA-1PE,CHA-2PE', 18),
('CHA-1PF,CHA-2PF', 18),
('CHA-1PJ,CHA-2PJ', 18),
('CHA-1PK,CHA-2PK', 18),
('CHA-1PC,CHA-2PC', 19),
('CHA-1PJ,CHA-2PJ', 19),
('CHA-1PC,CHA-2PC', 20),
('CHA-1PD,CHA-2PD', 20),
('CHA-1PJ,CHA-2PJ', 20),
('CHA-1PK,CHA-2PK', 20),
('CHA-1PC,CHA-2PC', 21),
('CHA-1PD,CHA-2PD', 21),
('CHA-1PE,CHA-2PE', 21),
('CHA-1PJ,CHA-2PJ', 21),
('CHA-1PK,CHA-2PK', 21),
('CHA-1PC,CHA-2PC', 22),
('CHA-1PD,CHA-2PD', 22),
('CHA-1PC,CHA-2PC', 23),
('CHA-1PD,CHA-2PD', 23),
('CHA-1PJ,CHA-2PJ', 23);

